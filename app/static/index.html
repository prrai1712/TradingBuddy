<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  
  <title>TradingBuddy â€“ Options Dashboard</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" type="image/x-icon" href="/static/favicon.png?v=2">

  <!-- External CSS -->
  <link rel="stylesheet" href="/static/css/styles.css?v=3">

  <!-- ChartJS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>

  <div class="header">
    TradingBuddy
  <button id="themeToggle" class="theme-btn">ðŸŒ™</button>
  </div>
  <!-- CONTROLS -->
  <div class="controls">
    <div>
      <label>Symbol</label>
      <select id="symbol" onchange="loadExpiryDates()">
        <option value="NIFTY">NIFTY</option>
        <option value="BANKNIFTY">BANKNIFTY</option>
      </select>
    </div>

    <div>
      <label>Year</label>
      <select id="year" onchange="loadExpiryDates()"></select>
    </div>

    <div>
      <label>Expiry</label>
      <select id="expiry" onchange="autoDates()"></select>
    </div>

    <div>
    <label>Strike</label>
    <input id="strike" type="number" value="26000" placeholder="e.g. 25800" />
    </div>


    <div>
      <label>From Date</label>
      <input id="fromDate" type="text" />
    </div>

    <div>
      <label>To Date</label>
      <input id="toDate" type="text" />
    </div>

    <div class="full">
      <button class="btn-load" onclick="getPrice()">Load Charts</button>
      <button class="btn-reset" onclick="resetControls()">Reset</button>
    </div>
  </div>

  <div id="result"></div>

  <div class="live-container">
    <div class="live-header">
        <div id="niftyLive" class="live-nifty">NIFTY Spot (Live): --</div>
        <h2>Live Option Data</h2>
    </div>

    <div class="live-grid">
      <div class="card">
        <h3 id="ceTitle">-- CE</h3>
        <div id="ceBox">Loading...</div>
      </div>

      <div class="card">
        <h3 id="peTitle">-- PE</h3>
        <div id="peBox">Loading...</div>
      </div>

      <div class="card ratio-card">
        <h3>Ratios</h3>
        <div id="ratioBox">--</div>
      </div>
    </div>
  </div>

  <div class="charts-wrapper">
    <div class="chart-box">
      <h3>CE + PE Combined (Close)</h3>
      <canvas id="combinedChart" height="220"></canvas>
    </div>

    <div class="chart-box">
      <h3>NIFTY Spot (Close)</h3>
      <canvas id="niftyChart" height="220"></canvas>
    </div>
  </div>

  <!-- Load ES MODULES -->
  <script type="module" src="/static/js/main.js?v=3"></script>

</body>
</html>
